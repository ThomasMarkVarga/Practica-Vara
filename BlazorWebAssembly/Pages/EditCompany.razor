@page "/editcompany/{CIF}"
@inject IAPICallService APICallService
@inject NavigationManager NavigationManager

<h3>Edit @company.companyName</h3>

<EditForm Model="company" OnSubmit="HandleSubmit">
    <label>CIF:</label>
    <br>
    <InputText @bind-Value="company.companyCIF">@company.companyCIF</InputText>
    <br>

    <label>Name:</label>
    <br>
    <InputText @bind-Value="company.companyName">@company.companyName</InputText>
    <br>

    <label>Address:</label>
    <br>
    <InputText @bind-Value="company.companyAddress">@company.companyAddress</InputText>
    <br>

    <label>County:</label>
    <br>
    <InputText @bind-Value="company.companyCounty">@company.companyCounty</InputText>
    <br>

    <label>Phone:</label>
    <br>
    <InputText @bind-Value="company.companyPhone">@company.companyPhone</InputText>
    <br>
    <br>

    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@code {
    [Parameter]
    public string CIF { get; set; }

    Company company = new Company();

    protected override async Task OnInitializedAsync()
    {
        company = await APICallService.GetCompany(CIF);
    }

    async Task HandleSubmit()
    {
        await APICallService.UpdateCompany(CIF, company);

        NavigationManager.NavigateTo("/companies");
    }
}
